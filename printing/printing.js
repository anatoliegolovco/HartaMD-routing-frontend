function printWindow(){window.print()}OSRM={},OSRM.Control={},OSRM.GLOBALS={main_handle:{boxVisible:function(){return!1}}},OSRM.GLOBALS.Localization={culture:"en-US"},OSRM.GLOBALS.DISTANCE_FORMAT=0,OSRM.G=OSRM.GLOBALS,OSRM.GLOBALS.icons={},OSRM.prefetchIcons=function(a){for(var b=[{id:"marker-source",image_id:"marker-source"},{id:"marker-target",image_id:"marker-target"},{id:"marker-via",image_id:"marker-via"},{id:"marker-highlight",image_id:"marker-highlight"}],c=L.LabelMarkerIcon.extend({options:{shadowUrl:a["marker-shadow"].src,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-33]}}),d=0;d<b.length;d++)OSRM.G.icons[b[d].id]=new c({iconUrl:a[b[d].image_id].src})},OSRM.drawMap=function(a,b){var c=new L.TileLayer(a.url,a.options);c.options.culture=OSRM.G.Localization.culture,OSRM.G.map=new OSRM.Control.Map("overview-map",{center:new L.LatLng(48.84,10.1),zoom:13,zoomAnimation:!1,fadeAnimation:!1,layers:[c],attributionControl:!1,zoomControl:!1,dragging:!1,scrollWheelZoom:!1,touchZoom:!1,doubleClickZoom:!1}),OSRM.G.map.scaleControl=new L.Control.Scale,OSRM.G.map.scaleControl.options.metric=1!=OSRM.G.active_distance_format,OSRM.G.map.scaleControl.options.imperial=1==OSRM.G.active_distance_format,OSRM.G.map.scaleControl.addTo(OSRM.G.map);var d=new L.LatLngBounds([b.getSouthWest().lat,b.getSouthWest().lng],[b.getNorthEast().lat,b.getNorthEast().lng]);return OSRM.G.map.fitBoundsUI(d),OSRM.G.map.getBoundsZoom(d)},OSRM.drawMarkers=function(a){OSRM.G.map.addLayer(new L.LabelMarker([a[0].getPosition().lat,a[0].getPosition().lng],{draggable:!1,clickable:!1,icon:OSRM.G.icons["marker-source"]}));for(var b=a.length-1,c=1;b>c;c++){var d=new L.LabelMarker([a[c].getPosition().lat,a[c].getPosition().lng],{draggable:!1,clickable:!1,icon:OSRM.G.icons["marker-via"]});OSRM.G.map.addLayer(d),d.setLabel(c)}OSRM.G.map.addLayer(new L.LabelMarker([a[b].getPosition().lat,a[b].getPosition().lng],{draggable:!1,clickable:!1,icon:OSRM.G.icons["marker-target"]}))},OSRM.drawRoute=function(a){void 0==OSRM.G.route&&(OSRM.G.route=new L.Polyline([]));var b=[];if(a[0].lat)for(var c=0,d=a.length;d>c;c++)b.push([a[c].lat,a[c].lng]);else for(var c=0,d=a.length;d>c;c++)b.push([a[c][0],a[c][1]]);OSRM.G.route.setLatLngs(b),OSRM.G.route.setStyle({clickable:!1,color:"#0033FF",weight:5,dashArray:""}),OSRM.G.map.addLayer(OSRM.G.route)},window.opener&&window.opener.OSRM&&window.opener.OSRM.Browser.onLoadHandler(window.opener.OSRM.Printing.printWindowLoaded,window),L.LabelMarker=L.Marker.extend({changeIcon:function(a){this.options.icon=a,this._map&&this._changeIcon()},setLabel:function(a){this._icon&&(this._icon.lastChild.innerHTML=a,this._icon.lastChild.style.display="block")},setTitle:function(a){this.options.title=a,this._icon.title=a},_changeIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide";this._icon&&(this._icon=a.icon.changeIcon(this._icon),L.DomUtil.addClass(this._icon,d),L.DomUtil.addClass(this._icon,"leaflet-clickable"))}}),L.LabelMarkerIcon=L.Icon.extend({_createImg:function(a){var b;if(L.Browser.ie6)b=document.createElement("div"),b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")';else{b=document.createElement("div");var c=document.createElement("img"),d=document.createElement("div");c.src=a,d.className="via-counter",d.innerHTML="",b.appendChild(c),b.appendChild(d)}return b},changeIcon:function(a){return this._changeIcon("icon",a)},changeShadow:function(a){return this.options.shadowUrl?this._changeIcon("shadow",a):null},_changeIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._changeImg(c,b);return this._setIconStyles(d,a),d},_changeImg:function(a,b){return L.Browser.ie6?b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")':b.firstChild.src=a,b}}),OSRM.Control.Map=L.Map.extend({_boundsInsideView:function(a){var b=this.getBounds(),c=this.project(b.getSouthWest()),d=this.project(b.getNorthEast()),e=this.project(a.getSouthWest()),f=this.project(a.getNorthEast());return d.y>f.y?!1:d.x<f.x?!1:c.y<e.y?!1:c.x>e.x?!1:!0},setViewBounds:function(a){var b=this.getBoundsZoom(a);this._zoom>b?this.setView(a.getCenter(),b):this._boundsInsideView(a)||this.setView(a.getCenter(),this._zoom)},setViewUI:function(a,b,c){if(OSRM.G.main_handle.boxVisible()){var d=this.project(a,b);d.x-=OSRM.G.main_handle.boxWidth()/2,a=this.unproject(d,b)}this.setView(a,b,c)},setViewBoundsUI:function(a){var b=a.getSouthWest(),c=a.getNorthEast(),d=this.getBoundsZoom(a),e=this.project(b,d);e.x-=OSRM.G.main_handle.boxVisible()?OSRM.G.main_handle.boxWidth()+20:20,e.y+=20;var f=this.project(c,d);f.y-=20,f.x+=20,a.extend(this.unproject(e,d)),a.extend(this.unproject(f,d)),this.setViewBounds(a)},fitBoundsUI:function(a){var b=a.getSouthWest(),c=a.getNorthEast(),d=this.getBoundsZoom(a),e=this.project(b,d);e.x-=OSRM.G.main_handle.boxVisible()?OSRM.G.main_handle.boxWidth()+20:20,e.y+=20;var f=this.project(c,d);f.y-=20,f.x+=20,a.extend(this.unproject(e,d)),a.extend(this.unproject(f,d)),this.fitBounds(a)},getBoundsUI:function(){var a=this.getPixelBounds();OSRM.G.main_handle.boxVisible()&&(a.min.x+=OSRM.G.main_handle.boxWidth());var b=this.unproject(new L.Point(a.min.x,a.max.y),this._zoom,!0),c=this.unproject(new L.Point(a.max.x,a.min.y),this._zoom,!0);return new L.LatLngBounds(b,c)},getCenterUI:function(a){var b=this.getSize();OSRM.G.main_handle.boxVisible()&&(b.x+=OSRM.G.main_handle.boxWidth());var c=this._getTopLeftPoint().add(b.divideBy(2));return this.unproject(c,this._zoom,a)},getActiveLayerId:function(){for(var a=0,b=OSRM.DEFAULTS.TILE_SERVERS,c=this.layerControl.getActiveLayerName(),d=0,e=b.length;e>d;d++)if(b[d].display_name==c){a=d;break}return a}}),L.LabelMarker=L.Marker.extend({changeIcon:function(a){this.options.icon=a,this._map&&this._changeIcon()},setLabel:function(a){this._icon&&(this._icon.lastChild.innerHTML=a,this._icon.lastChild.style.display="block")},setTitle:function(a){this.options.title=a,this._icon.title=a},_changeIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide";this._icon&&(this._icon=a.icon.changeIcon(this._icon),L.DomUtil.addClass(this._icon,d),L.DomUtil.addClass(this._icon,"leaflet-clickable"))}}),L.LabelMarkerIcon=L.Icon.extend({_createImg:function(a){var b;if(L.Browser.ie6)b=document.createElement("div"),b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")';else{b=document.createElement("div");var c=document.createElement("img"),d=document.createElement("div");c.src=a,d.className="via-counter",d.innerHTML="",b.appendChild(c),b.appendChild(d)}return b},changeIcon:function(a){return this._changeIcon("icon",a)},changeShadow:function(a){return this.options.shadowUrl?this._changeIcon("shadow",a):null},_changeIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._changeImg(c,b);return this._setIconStyles(d,a),d},_changeImg:function(a,b){return L.Browser.ie6?b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")':b.firstChild.src=a,b}}),OSRM.Control.Map=L.Map.extend({_boundsInsideView:function(a){var b=this.getBounds(),c=this.project(b.getSouthWest()),d=this.project(b.getNorthEast()),e=this.project(a.getSouthWest()),f=this.project(a.getNorthEast());return d.y>f.y?!1:d.x<f.x?!1:c.y<e.y?!1:c.x>e.x?!1:!0},setViewBounds:function(a){var b=this.getBoundsZoom(a);this._zoom>b?this.setView(a.getCenter(),b):this._boundsInsideView(a)||this.setView(a.getCenter(),this._zoom)},setViewUI:function(a,b,c){if(OSRM.G.main_handle.boxVisible()){var d=this.project(a,b);d.x-=OSRM.G.main_handle.boxWidth()/2,a=this.unproject(d,b)}this.setView(a,b,c)},setViewBoundsUI:function(a){var b=a.getSouthWest(),c=a.getNorthEast(),d=this.getBoundsZoom(a),e=this.project(b,d);e.x-=OSRM.G.main_handle.boxVisible()?OSRM.G.main_handle.boxWidth()+20:20,e.y+=20;var f=this.project(c,d);f.y-=20,f.x+=20,a.extend(this.unproject(e,d)),a.extend(this.unproject(f,d)),this.setViewBounds(a)},fitBoundsUI:function(a){var b=a.getSouthWest(),c=a.getNorthEast(),d=this.getBoundsZoom(a),e=this.project(b,d);e.x-=OSRM.G.main_handle.boxVisible()?OSRM.G.main_handle.boxWidth()+20:20,e.y+=20;var f=this.project(c,d);f.y-=20,f.x+=20,a.extend(this.unproject(e,d)),a.extend(this.unproject(f,d)),this.fitBounds(a)},getBoundsUI:function(){var a=this.getPixelBounds();OSRM.G.main_handle.boxVisible()&&(a.min.x+=OSRM.G.main_handle.boxWidth());var b=this.unproject(new L.Point(a.min.x,a.max.y),this._zoom,!0),c=this.unproject(new L.Point(a.max.x,a.min.y),this._zoom,!0);return new L.LatLngBounds(b,c)},getCenterUI:function(a){var b=this.getSize();OSRM.G.main_handle.boxVisible()&&(b.x+=OSRM.G.main_handle.boxWidth());var c=this._getTopLeftPoint().add(b.divideBy(2));return this.unproject(c,this._zoom,a)},getActiveLayerId:function(){for(var a=0,b=OSRM.DEFAULTS.TILE_SERVERS,c=this.layerControl.getActiveLayerName(),d=0,e=b.length;e>d;d++)if(b[d].display_name==c){a=d;break}return a}});