OSRM.Localization={DIRECTORY:"localization/",current_language:OSRM.DEFAULTS.LANGUAGE,fallback_language:"en",load_on_demand_language:null,init:function(){var a=OSRM.DEFAULTS.LANGUAGE_SUPPORTED;if(1==OSRM.DEFAULTS.LANGUAGE_USE_BROWSER_SETTING)for(var b=(navigator.language||navigator.userLanguage||"").substring(0,2),c=0;c<a.length;++c)a[c].encoding==b&&(OSRM.Localization.current_language=b);for(var d=[],e=[],f=0,c=0,g=a.length;g>c;c++)d.push({display:a[c].encoding,value:a[c].encoding}),e.push({display:a[c].name,value:a[c].encoding}),a[c].encoding==OSRM.Localization.current_language&&(f=c);OSRM.GUI.selectorInit("gui-language-toggle",d,f,OSRM.Localization.setLanguageWrapper),OSRM.GUI.selectorInit("gui-language-2-toggle",e,f,OSRM.Localization.setLanguageWrapper),OSRM.Localization.setLanguage(OSRM.Localization.fallback_language),OSRM.Localization.setLanguage(OSRM.Localization.current_language)},setLanguageWrapper:function(a){OSRM.GUI.deactivateTooltip("LOCALIZATION"),OSRM.Localization.setLanguage(a)},setLanguage:function(a,b){if(b){var c=OSRM.Localization[OSRM.Localization.fallback_language];if(null==c||null!=c.loading)return;var d=OSRM.Localization[OSRM.Localization.load_on_demand_language];if(null!=d&&null==d.loading&&(a=OSRM.Localization.load_on_demand_language),a!=OSRM.Localization.load_on_demand_language)return}if(OSRM.GUI.selectorChange("gui-language-toggle",a),OSRM.GUI.selectorChange("gui-language-2-toggle",a),OSRM.Localization[a]){if(OSRM.Localization[a].loading)return;OSRM.Localization.current_language=a,OSRM.Localization.load_on_demand_language=null,OSRM.GUI.setLabels(),OSRM.GUI.updateNotifications(),OSRM.Utils.updateAbbreviationCache();for(var e=0,f=OSRM.G.localizable_maps.length;f>e;e++)OSRM.G.localizable_maps[e].options.culture=OSRM.loc("CULTURE");if(OSRM.G.map.layerControl.getActiveLayer().redraw&&OSRM.G.map.layerControl.getActiveLayer().redraw(),OSRM.G.map.layerControl.setLayerLabels(),null==OSRM.G.markers)return;OSRM.G.markers.route.length>1?OSRM.Routing.getRoute({keepAlternative:!0}):OSRM.G.markers.route.length>0&&""!=document.getElementById("information-box").innerHTML?(OSRM.Geocoder.call(OSRM.C.SOURCE_LABEL,document.getElementById("gui-input-source").value),OSRM.Geocoder.call(OSRM.C.TARGET_LABEL,document.getElementById("gui-input-target").value)):(OSRM.Geocoder.updateAddress(OSRM.C.SOURCE_LABEL,!1),OSRM.Geocoder.updateAddress(OSRM.C.TARGET_LABEL,!1),OSRM.GUI.clearResults())}else if(1==OSRM.DEFAULTS.LANUGAGE_ONDEMAND_RELOADING)for(var g=OSRM.DEFAULTS.LANGUAGE_SUPPORTED,e=0,f=g.length;f>e;e++)if(g[e].encoding==a){OSRM.Localization.load_on_demand_language=a,OSRM.Localization[a]={loading:!0};var h=document.createElement("script");h.type="text/javascript",h.src=OSRM.Localization.DIRECTORY+"OSRM.Locale."+a+".js",document.head.appendChild(h);break}},translate:function(a,b){return OSRM.Localization[OSRM.Localization.current_language]&&OSRM.Localization[OSRM.Localization.current_language][a]?OSRM.Localization[OSRM.Localization.current_language][a]:OSRM.Localization[OSRM.Localization.fallback_language]&&OSRM.Localization[OSRM.Localization.fallback_language][a]?OSRM.Localization[OSRM.Localization.fallback_language][a]:b?OSRM.loc(b):a}},OSRM.loc=OSRM.Localization.translate;